<DMMainScreen>:
    BoxLayout:
        orientation: 'horizontal'
        padding: 10
        spacing: 10

        # Left side: Players and Enemies
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.25
            spacing: 10

            Label:
                text: "Online Spieler"
                font_size: '20sp'
                size_hint_y: None
                height: 40
            ScrollView:
                GridLayout:
                    id: online_players_list
                    cols: 1
                    size_hint_y: None
                    height: self.minimum_height

            Label:
                text: "Offline Spieler"
                font_size: '20sp'
                size_hint_y: None
                height: 40
            ScrollView:
                GridLayout:
                    id: offline_players_list
                    cols: 1
                    size_hint_y: None
                    height: self.minimum_height

            Label:
                text: "Gegner"
                font_size: '20sp'
                size_hint_y: None
                height: 40
            ScrollView:
                GridLayout:
                    id: enemies_list
                    cols: 1
                    size_hint_y: None
                    height: self.minimum_height

        # Center: Map
        GridLayout:
            id: dm_map_grid
            size_hint_x: 0.5
            cols: 10 # Default
            spacing: 2

        # Right side: Controls and Log
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.25
            spacing: 10

            Label:
                text: "Initiative"
                font_size: '20sp'
                size_hint_y: None
                height: 40

            ScrollView:
                size_hint_y: 0.4
                GridLayout:
                    id: initiative_list
                    cols: 1
                    size_hint_y: None
                    height: self.minimum_height

            Button:
                text: "Initiative f端r alle w端rfeln"
                on_press: root.roll_initiative_for_all()
                size_hint_y: None
                height: 44

            Button:
                text: "Offline Spieler hinzuf端gen"
                on_press: root.add_offline_player()
                size_hint_y: None
                height: 44

            Button:
                text: "Gegner hinzuf端gen"
                on_press: root.add_enemy()
                size_hint_y: None
                height: 44

            Button:
                text: "Sitzung speichern"
                on_press: root.save_session()
                size_hint_y: None
                height: 44

            Button:
                text: "Map"
                on_press: root.show_map_options_popup()
                size_hint_y: None
                height: 44

            Label:
                text: "Log"
                font_size: '20sp'
                size_hint_y: None
                height: 40

            ScrollView:
                size_hint_y: 0.6
                Label:
                    id: log_output
                    text: "Game log will appear here..."
                    size_hint_y: None
                    height: self.texture_size[1]
                    text_size: self.width, None

            Button:
                text: "Lobby"
                on_press: root.manager.current = 'dm_lobby'
                size_hint_y: None
                height: 60
