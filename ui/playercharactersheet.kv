<PlayerCharacterSheet>:
    main_layout: main_layout
    BoxLayout:
        id: main_layout
        orientation: 'vertical'

        # Header
        GridLayout:
            cols: 3
            size_hint_y: None
            height: 60
            Label:
                id: name_label
                font_size: '20sp'
            Label:
                id: class_label
            Label:
                id: alignment_label

        # Content
        ScrollView:
            GridLayout:
                cols: 2
                spacing: 10
                padding: 10
                size_hint_y: None
                height: self.minimum_height

                # Left Column
                BoxLayout:
                    orientation: 'vertical'
                    spacing: 10
                    size_hint_y: None
                    height: self.minimum_height

                    GridLayout:
                        id: stats_box
                        cols: 2
                        size_hint_y: None
                        height: 280

                    BoxLayout:
                        id: hp_box
                        size_hint_y: None
                        height: 50
                        Label:
                            id: hp_label

                    GridLayout:
                        cols: 1
                        size_hint_y: None
                        height: 150
                        spacing: 5
                        Label:
                            text: "Ausrüstete Waffe:"
                        Label:
                            id: weapon_spinner
                        Button:
                            text: "Schaden auswürfeln"
                            on_press: root.roll_damage()

                    GridLayout:
                        id: currency_box
                        cols: 5
                        size_hint_y: None
                        height: 100
                        spacing: 5

                # Right Column
                BoxLayout:
                    orientation: 'vertical'
                    spacing: 10
                    size_hint_y: None
                    height: self.minimum_height

                    Label:
                        text: "Inventar"
                        font_size: '20sp'
                        size_hint_y: None
                        height: 40
                    GridLayout:
                        id: inventory_layout
                        cols: 1
                        spacing: 5
                        size_hint_y: None
                        height: self.minimum_height

                    Label:
                        text: "Spieler"
                        font_size: '20sp'
                        size_hint_y: None
                        height: 40
                    GridLayout:
                        id: player_list_view
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height

                    Label:
                        text: "Initiative"
                        font_size: '20sp'
                        size_hint_y: None
                        height: 40
                    GridLayout:
                        id: initiative_view
                        cols: 1
                        size_hint_y: None
                        height: self.minimum_height

        # Footer
        BoxLayout:
            size_hint_y: None
            height: 100
            orientation: 'vertical'
            spacing: 5
            BoxLayout:
                size_hint_y: None
                height: 45
                spacing: 5
                Button:
                    text: "STR"
                    on_press: root.roll_d20('Stärke')
                Button:
                    text: "DEX"
                    on_press: root.roll_d20('Geschicklichkeit')
                Button:
                    text: "CON"
                    on_press: root.roll_d20('Konstitution')
                Button:
                    text: "INT"
                    on_press: root.roll_d20('Intelligenz')
                Button:
                    text: "WIS"
                    on_press: root.roll_d20('Weisheit')
                Button:
                    text: "CHA"
                    on_press: root.roll_d20('Charisma')
            BoxLayout:
                size_hint_y: None
                height: 45
                spacing: 5
                Button:
                    text: "Zauber"
                    on_press: root.show_spells_popup()
                Button:
                    text: "Rasten"
                    on_press: root.show_rest_popup()
                Button:
                    text: "Charakterbogen"
                    on_press: root.show_full_character_sheet()
                Button:
                    text: "Verbindung trennen"
                    on_press: root.network_manager.shutdown()
